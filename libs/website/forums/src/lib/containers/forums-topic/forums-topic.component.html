<div class="p-grid">
  <div class="p-col"></div>
  <div class="p-md-12 p-lg-10">

    <ng-template #loadingIndicator>
      <progress-spinner></progress-spinner>
    </ng-template>
    <div class="thread p-card p-p-5 p-mt-5 p-mb-5">
      <div *ngIf="topic$ | async as topic; else loadingIndicator">

        <h1>{{ topic.name }} Forum</h1>
        <hr>

        <p-table [value]="topic.threads" styleClass="p-datatable-striped ">
          <ng-template pTemplate="header">
            <tr>
                <th>Topic</th>
                <th>Author</th>
            </tr>
        </ng-template>

          <ng-template pTemplate="body" let-thread>
            <tr [routerLink]="['/', 'forums', 'topic', topic.id, 'threads', thread.id]">
              <td class=" p-m-0 p-p-3">{{ thread.name }}</td><td class=" p-m-0 p-p-3"><h4 class="p-m-0"><i class="pi pi-user p-mr-1" style="font-size: 1rem"></i>{{ thread.user?.name}}<br><i
                class="pi pi-clock p-mr-1"
                style="font-size: 1rem"></i>{{ thread.createdAt | date:'dd MMM yyyy h:mm:ss'}}</h4>  </td>
            </tr>
          </ng-template>
        </p-table>

      </div>

      <div class="p-grid">
        <div class="p-col-12 p-mt-3 p-mb-3  p-text-right">
          <a *ngIf="previousPage$ | async as page" (click)="loadPage(page)" class="p-mr-3">Previous Page</a>
          <a *ngIf="nextPage$ | async as page" (click)="loadPage(page)">Next Page</a>
        </div>

        <ng-container>
          <div class="p-col-12 p-text-right">
            <a *ngIf="!showAddThread" (click)="showAddThread = !showAddThread"
              class="p-button p-component p-ripple">Create a new thread</a>
          </div>

          <div class="p-col-12">


           <div *ngIf="showAddThread">
            <label for="">Thread Name</label>
            <input [(ngModel)]="name" type="text" class="p-component" />

              <div class="p-col p-text-right">
                <div class="p-field">
                  <button (click)="createThread()" class="p-button p-component p-ripple"
                    [disabled]="name == null">Create</button>
                </div>

              </div>

            </div>

          </div>
        </ng-container>

      </div>


    </div>

  </div>
  <div class="p-col"></div>
</div>
