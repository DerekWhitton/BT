<div class="p-grid">
  <div class="p-col-10 p-offset-1 p-md-10 p-md-offset-1 p-lg-8 p-lg-offset-2">
    <div class="thread p-card p-p-5 p-mt-5 p-mb-5">
      <p-toast position="top-center"></p-toast>
      <div class="p-grid p-fluid">
        <div class="p-col-6">
          <h1>Favourites</h1>
        </div>
        <div class="p-col-6 header-dropdown">
          <span class="p-float-label">
            <p-dropdown
              id="listingTypeSelect"
              [showClear]="true"
              [options]="selectableListingTypes"
              [autoDisplayFirst]="false"
              [(ngModel)]="selectedListingType"
              (onChange)="loadFavorites()"
            ></p-dropdown>
            <label for="listingTypeSelect">Listing type</label>
          </span>
        </div>
      </div>
      <hr />
      <div class="p-grid">
        <div class="p-lg-4 p-md-6" style="position: relative;" *ngFor="let listing of favouriteListings">
          <img
            src="assets/layout/images/listing-label.png"
            style="max-width: 100%;"
            alt="listing"
            class="listing-label"
            *ngIf="listing.type == listingType.Auction"
          />
          <p-card class="favourite-card">
            <ng-template pTemplate="header">
              <p-galleria
                *ngIf="listing.images.length > 0"
                [(value)]="listing.images"
                [responsiveOptions]="responsiveOptions"
                [containerStyle]="{ 'max-width': '400px' }"
                [numVisible]="5"
                [circular]="true"
                [showItemNavigators]="true"
                [showThumbnails]="false"
                [showIndicators]="true"
                [showItemNavigatorsOnHover]="true"
                [showIndicatorsOnItem]="true"
              >
                <ng-template pTemplate="item" let-item>
                  <img
                    [src]="item.url"
                    style="width: 100%; overflow: hidden; display: block;"
                  />
                </ng-template>
                <ng-template pTemplate="thumbnail" let-item>
                  <div class="p-grid p-nogutter p-justify-center">
                    <img [src]="item.url" style="display: block;" />
                  </div>
                </ng-template>
              </p-galleria>
            </ng-template>
            <h4>{{ listing.name }}</h4>
            <div *ngIf="listing.type == listingType.Sale" class="p-p-2 favorite-body-text">
              <label>Price: R {{ listing.startingPrice }}</label>
            </div>
            <div *ngIf="listing.type == listingType.Auction" class="p-p-2 favorite-body-text">
              Ends in:
              <bushtrade-web-countdown-timer
                *ngIf="listing.timeRemaining > 0"
                [endDate]="listing.endDate"
                (timeDifferenceRemaining)="listing.timeRemaining = $event"
              ></bushtrade-web-countdown-timer>
              <label *ngIf="listing.timeRemaining <= 0">
                CLOSED
              </label>
            </div>
            <div *ngIf="listing.type == listingType.Auction && listing.timeRemaining <= 0">

            </div>
            <ng-template pTemplate="footer">
              <div class="p-grid">
                <div class="p-lg-12">
                  <button
                    pButton
                    class="p-button-raised"
                    [label]="'View details'"
                    [routerLink]="['/', 'listings', listing.id]"
                  ></button>
                </div>
                <div class="p-lg-12">
                  <button
                    pButton
                    class="p-button-raised p-button-danger"
                    [label]="'Remove'"
                    (click)="removeFavourite(listing.id)"
                  ></button>
                </div>
              </div>
            </ng-template>
          </p-card>
        </div>
      </div>
    </div>
  </div>
</div>
